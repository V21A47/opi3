<project name="${projectName}" default="build">

    <property file="ant.properties"/>

    <path id="classpath">
        <fileset dir="${libs}">
            <include name="*.jar"/>
        </fileset>
    </path>

    <target name="compile">
        <mkdir dir="${build}"/>
        <mkdir dir="${reportPath}"/>

        <!--
        <javac fork="true" executable="/usr/jdk/jdk1.8.0/bin/javac" destdir="${build}"                   includeantruntime="false" srcdir="${src}"/>
        -->
        <javac fork="true" target="1.8" destdir="${build}" includeantruntime="false" srcdir="${src}"/>
        <javac fork="true" target="1.8" destdir="${build}" includeantruntime="false" srcdir="${testPath}" classpathref="classpath"/>
    </target>

    <target name="build" depends="compile">
        <manifest file="${build}/MANIFEST.MF">
            <attribute name="Main-Class" value="${mainClass}"/>
            <attribute name="Specification-Version" value="${specificationVersion}"/>
            <attribute name="Implementation-Version" value="${implementationVersion}"/>
        </manifest>

        <jar destfile="${projectName}.jar" manifest="${build}/MANIFEST.MF">
            <fileset dir="${build}">
                <include name="*.class"/>
            </fileset>
        </jar>
    </target>

    <target name="clean">
        <delete dir="${build}"/>
        <delete file="${projectName}.jar"/>
    </target>

    <target name="test" depends="build">

        <junit printsummary="yes" haltonfailure="no">
            <classpath refid="classpath"/>
            <classpath location="@{testPath}"/>

            <batchtest fork="yes" todir="${reportPath}">
                <fileset dir="${testPath}">
                    <include name="*Test*.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

</project>
